/**
 * Report generator for FSQM Reports & Analysis
 *
 * @dependency jquery, google charts
 *
 * @author     Swashata@iPanelThemes.com
 * @version 2.0.0
 * @license    Themeforest Split
 */
!function(e,t,a,n){"use strict";function i(t,a){this.element=t,this.jElement=e(t),this.settings=e.extend({},o,a),this._defaults=o,this._name=r,this.init()}google.charts.load("current",{packages:["corechart","bar"]});var s=!1;google.charts.setOnLoadCallback(function(){s=!0});var r="iptFSQMReport",o={settings:{},survey:{},feedback:{},pinfo:{},filters:{},wpnonce:"",ajaxurl:"",form_id:0,do_data:!1,do_data_nonce:"",do_names:!1,do_names_nonce:"",do_others:!1,do_others_nonce:"",do_date:!1,do_date_nonce:"",cmeta:{},material:!1,action:"ipt_fsqm_report",query_elements:{},sensitive_data:!1,sensitive_data_nonce:""};i.prototype={init:function(){return"undefined"!=typeof wp&&"undefined"!=typeof wp.customize?void(console&&console.warn&&console.warn("Customizer Detected. Shutting Down FSQM Reports")):(this.progressBar=this.jElement.find(".ipt_fsqm_report_progressbar").eq(0).progressbar(),this.loader=this.jElement.find(".ipt_fsqm_report_ajax").eq(0),this.printer=this.jElement.next(".ipt_fsqm_report_print"),this.jElement.data("ipt_fsqm_report_op",this.settings),void this.generateReport(0))},generateReport:function(t){var a=this;this.settings;e.post(this.settings.ajaxurl,{action:this.settings.action,settings:this.settings.settings,wpnonce:this.settings.wpnonce,form_id:this.settings.form_id,do_data:this.settings.do_data,do_data_nonce:this.settings.do_data_nonce,sensitive_data:this.settings.sensitive_data,sensitive_data_nonce:this.settings.sensitive_data_nonce,do_names:this.settings.do_names,do_names_nonce:this.settings.do_names_nonce,do_others:this.settings.do_others,do_others_nonce:this.settings.do_others_nonce,do_date:this.settings.do_date,do_date_nonce:this.settings.do_date_nonce,query_elements:this.settings.query_elements,filters:this.settings.filters,doing:t},function(e){if(null===e)return a.loader.find(".ipt_uif_ajax_loader_icon").removeClass("ipt_uif_ajax_loader_spin"),void a.loader.find(".ipt_uif_ajax_loader_text").text("ServerSide Error");a.saveResponse(e);try{a.progressBar.progressbar("option","value",a.numberFormat(e.done))}catch(t){a.progressBar.progressbar(),a.progressBar.progressbar("option","value",a.numberFormat(e.done))}e.done>=100?a.initCharts():a.generateReport(++t)},"json").fail(function(e,t,n){a.loader.find(".ipt_uif_ajax_loader_inner").removeClass("ipt_uif_ajax_loader_animate"),a.loader.find(".ipt_uif_ajax_loader_text").text("HTTP ERROR: "+t+" "+n)})},saveResponse:function(a){var i,s,r,o,d,p,l,u,c,g,f,_,h,m,v,y,b,w,k,x,C,F,R,S,M,Q,T,q,j,A,N,P,z,E,B,L,O,D,I,H,V=this,U=this.settings;for(f in U.survey.elements)if(a.survey[f]!==n&&null!==a.survey[f])switch(U.survey.data[f]!==n&&"object"===e.type(U.survey.data[f])||(U.survey.data[f]={}),r=V.jElement.find(".ipt_fsqm_report_survey_"+f+" table.table_to_update").eq(0),o=r.find("td.data table"),d=r.next("div").find("table.others"),0===o.length&&(o=r),U.survey.elements[f].type){default:n!==iptFSQMReport.callbacks[U.survey.elements[f].type]&&"function"==typeof t[iptFSQMReport.callbacks[U.survey.elements[f].type]]&&t[iptFSQMReport.callbacks[U.survey.elements[f].type]].apply(V,[U.survey.elements[f],U.survey.data[f],a.survey[f],f,r,o,U]);break;case"radio":case"checkbox":case"select":case"thumbselect":for(c in a.survey[f])if("others_data"==c&&U.do_others){if(a.survey[f].others_data!==n&&a.survey[f].others_data.length)for(g in a.survey[f].others_data)s=a.survey[f].others_data[g],p=d.find("tbody"),p.find("tr.empty").remove(),l=e("<tr />"),l.append("<th>"+s.value+"</th>"),U.do_names&&(U.sensitive_data?l.append('<td><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>"):l.append("<td>"+s.name+"</td>")),U.sensitive_data&&l.append("<td>"+s.email+"</td>"),U.do_date&&l.append("<td>"+s.date+"</td>"),p.append(l)}else U.survey.data[f][c]!==n&&null!==U.survey.data[f][c]||(U.survey.data[f][c]=0),i=a.survey[f][c],isNaN(i)||(U.survey.data[f][c]+=i,U.do_data&&V.updateCount(o.find("td.data_op_"+c),U.survey.data[f][c]));break;case"slider":V.calculateSlider(a.survey[f],U.survey.data[f],o,o.find("tbody"),null,"slider_value_to_count_tr","slider_value_to_count",o.find("> tfoot > tr > th:first-child"),U.survey.elements[f].settings);break;case"range":V.calculateRange(a.survey[f],U.survey.data[f],o,o.find("tbody"),null,"range_value_to_count_tr","range_value_to_count",o.find("> tfoot > tr > th:first-child"),U.survey.elements[f].settings);break;case"grading":for(c in a.survey[f])"object"!=typeof U.survey.elements[f].settings.options[c]&&(U.survey.elements[f].settings.options[c]={label:U.survey.elements[f].settings.options[c],prefix:"",suffix:""}),U.do_data&&(_=o.find("tr.grading_"+c+".head"),_.length||(_=e('<tr class="grading_'+c+' head"><th class="head_th" rowspan="1">'+U.survey.elements[f].settings.options[c].label+"</th><th>"+iptFSQMReport.grading+"</th><th>"+iptFSQMReport.count+"</th></tr>"),o.find("tbody").append(_),_.after('<tr class="grading_'+c+'_avg avg head"><th>'+iptFSQMReport.avg+' <span class="avg_count">0</span> '+iptFSQMReport.avg_count+'</th><th><span class="avg">0</span></th><th>'+(U.survey.elements[f].settings.range?iptFSQMReport.avg_range:iptFSQMReport.avg_slider)+"</th></tr>"))),n!==U.survey.data[f][c]&&null!==U.survey.data[f][c]||(U.survey.data[f][c]={}),U.survey.elements[f].settings.prefix=U.survey.elements[f].settings.options[c].prefix,U.survey.elements[f].settings.suffix=U.survey.elements[f].settings.options[c].suffix,h=[a.survey[f][c],U.survey.data[f][c],o,o.find("tbody"),_,"grading_"+c+"_value_to_count_tr","grading_"+c+"_value_to_count",o.find("tr.grading_"+c+"_avg th"),U.survey.elements[f].settings],U.survey.elements[f].settings.range?V.calculateRange.apply(V,h):V.calculateSlider.apply(V,h),U.do_data&&_.find("th.head_th").attr("rowspan",o.find("tr.grading_"+c+"_value_to_count_tr").length+1);break;case"spinners":for(c in a.survey[f])U.do_data&&(_=o.find("tr.spinners_"+c+".head"),_.length||(_=e('<tr class="spinners_'+c+' head"><th class="head_th" rowspan="1">'+U.survey.elements[f].settings.options[c].label+"</th><th>"+iptFSQMReport.value+"</th><th>"+iptFSQMReport.count+"</th></tr>"),o.find("tbody").append(_),_.after('<tr class="spinners_'+c+'_avg avg head"><th>'+iptFSQMReport.avg+' <span class="avg_count">0</span> '+iptFSQMReport.avg_count+'</th><th><span class="avg">0</span></th><th>'+(U.survey.elements[f].settings.show_range?iptFSQMReport.avg_range:iptFSQMReport.avg_slider)+"</th></tr>"))),n===U.survey.data[f][c]&&(U.survey.data[f][c]={}),h=[a.survey[f][c],U.survey.data[f][c],o,o.find("tbody"),_,"spinners_"+c+"_value_to_count_tr","spinners_"+c+"_value_to_count",o.find("tr.spinners_"+c+"_avg th"),U.survey.elements[f].settings],V.calculateSlider.apply(V,h),U.do_data&&_.find("th.head_th").attr("rowspan",o.find("tr.spinners_"+c+"_value_to_count_tr").length+1);break;case"starrating":case"scalerating":for(c in a.survey[f])U.do_data?(_=o.find("tr.rating_"+c+".head"),_.length||(_=e('<tr class="rating_'+c+' head"><th class="head_th" rowspan="1">'+U.survey.elements[f].settings.options[c]+"</th><th>"+iptFSQMReport.rating+"</th><th>"+iptFSQMReport.count+"</th></tr>"),o.find("tbody").append(_),_.after('<tr class="rating_'+c+'_avg avg head"><th>'+iptFSQMReport.avg+' <span class="avg_count">0</span> '+iptFSQMReport.avg_count+'</th><th><span class="avg_img"></span></th><th><span class="avg">0</span> '+(U.survey.elements[f].settings.show_range?iptFSQMReport.avg_range:iptFSQMReport.avg_slider)+"</th></tr>"))):_=null,n===U.survey.data[f][c]&&(U.survey.data[f][c]={}),h=[a.survey[f][c],U.survey.data[f][c],o,o.find("tbody"),_,"rating_"+c+"_value_to_count_tr","rating_"+c+"_value_to_count",o.find("tr.rating_"+c+"_avg th"),U.survey.elements[f].settings],V.calculateRating.apply(V,h),U.do_data&&_.find("th.head_th").attr("rowspan",o.find("tr.rating_"+c+"_value_to_count_tr").length+1);break;case"smileyrating":for(m in a.survey[f])if("feedback_data"==m&&U.do_others){if(a.survey[f].feedback_data!==n&&a.survey[f].feedback_data.length)for(v in a.survey[f].feedback_data)s=a.survey[f].feedback_data[v],l=e("<tr>"),p=d.find("tbody"),p.find("tr.empty").remove(),l.append("<th>"+s.entry+"</th>"),l.append("<td>"+s.rating+"</td>"),U.do_names&&(U.sensitive_data?l.append('<td><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>"):l.append("<td>"+s.name+"</td>")),U.sensitive_data&&l.append("<td>"+s.email+"</td>"),U.do_date&&l.append("<td>"+s.date+"</td>"),p.append(l)}else n===U.survey.data[f][m]&&(U.survey.data[f][m]=0),U.survey.data[f][m]+=a.survey[f][m],U.do_data&&V.updateCount(o.find("td."+m),U.survey.data[f][m]);break;case"likedislike":for(m in a.survey[f])if("feedback_data"==m&&U.do_others){if(a.survey[f].feedback_data!==n&&a.survey[f].feedback_data.length)for(v in a.survey[f].feedback_data)s=a.survey[f].feedback_data[v],l=e("<tr>"),p=d.find("tbody"),p.find("tr.empty").remove(),l.append("<th>"+s.entry+"</th>"),l.append("<td>"+s.rating+"</td>"),U.do_names&&(U.sensitive_data?l.append('<td><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>"):l.append("<td>"+s.name+"</td>")),U.sensitive_data&&l.append("<td>"+s.email+"</td>"),U.do_date&&l.append("<td>"+s.date+"</td>"),p.append(l)}else n===U.survey.data[f][m]&&(U.survey.data[f][m]=0),U.survey.data[f][m]+=a.survey[f][m],U.do_data&&o.find("td."+m).html(U.survey.data[f][m]);break;case"matrix_dropdown":for(y in a.survey[f]){U.survey.data[f][y]===n&&(U.survey.data[f][y]={});for(b in a.survey[f][y]){U.survey.data[f][y][b]===n&&(U.survey.data[f][y][b]={});for(c in a.survey[f][y][b])U.survey.data[f][y][b][c]===n&&(U.survey.data[f][y][b][c]=0),e.isNumeric(a.survey[f][y][b][c])&&(U.survey.data[f][y][b][c]+=a.survey[f][y][b][c]),U.do_data&&r.find("td.row-"+y+"-column-"+b+"-op-"+c).html(U.survey.data[f][y][b][c])}}break;case"matrix":for(y in a.survey[f]){U.survey.data[f][y]===n&&(U.survey.data[f][y]={});for(b in a.survey[f][y])isNaN(a.survey[f][y][b])||(n===U.survey.data[f][y][b]?U.survey.data[f][y][b]=a.survey[f][y][b]:U.survey.data[f][y][b]+=a.survey[f][y][b],U.do_data&&V.updateCount(o.find("td.row_"+y+"_col_"+b),U.survey.data[f][y][b]))}break;case"toggle":for(w in a.survey[f])isNaN(a.survey[f][w])||(n===U.survey.data[f][w]?U.survey.data[f][w]=a.survey[f][w]:U.survey.data[f][w]+=a.survey[f][w],U.do_data&&V.updateCount(o.find("td.data_op_"+w),U.survey.data[f][w]));break;case"sorting":for(m in a.survey[f])if(k=V.objectLength(U.survey.elements[f].settings.options),isNaN(a.survey[f][m])){if("orders"==m&&"object"==typeof a.survey[f][m])for(x in a.survey[f][m])if(""!==x){if(n===U.survey.data[f].orders[x]){if(U.survey.data[f].orders[x]=a.survey[f][m][x],U.do_data){C=x.split("-"),o.find("tbody tr").length&&o.find("tbody").append('<tr class="head"><th colspan="3"></th></tr>'),F=!0;for(c in C)n!==U.survey.elements[f].settings.options[C[c]]&&(u="",F===!0?(F=!1,u='<tr><td class="icons">'+iptFSQMReport.sorting_img+"</td><th>"+U.survey.elements[f].settings.options[C[c]].label+'</th><td rowspan="'+k+'" data="'+x+'"></td></tr>'):u='<tr><td class="icons">'+iptFSQMReport.sorting_img+"</td><th>"+U.survey.elements[f].settings.options[C[c]].label+"</th>",o.find("tbody").append(u))}}else U.survey.data[f].orders[x]+=a.survey[f][m][x];U.do_data&&V.updateCount(o.find('td[data="'+x+'"]'),U.survey.data[f].orders[x])}}else n===U.survey.data[f][m]?U.survey.data[f][m]=a.survey[f][m]:U.survey.data[f][m]+=a.survey[f][m]}for(R in U.feedback.elements)if("object"==typeof a.feedback[R])switch(r=V.jElement.find(".ipt_fsqm_report_feedback_"+R+" table.table_to_update").eq(0),p=r.find("> tbody"),p.find("tr.empty").remove(),U.feedback.elements[R].type){default:n!==iptFSQMReport.callbacks[U.feedback.elements[R].type]&&"function"==typeof t[iptFSQMReport.callbacks[U.feedback.elements[R].type]]&&t[iptFSQMReport.callbacks[U.feedback.elements[R].type]].apply(V,[U.feedback.elements[R],U.feedback.data[R],a.feedback[R],R,r,U]);break;case"upload":for(S in a.feedback[R])if(M=a.feedback[R][S],Q=M.uploads.length,T=0===Q?1:Q,l=e("<tr />"),U.do_names&&(U.sensitive_data?l.append('<td rowspan="'+T+'"><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+M.id+'">'+M.name+"</a></td>"):l.append('<td rowspan="'+T+'">'+M.name+"</td>")),U.sensitive_data&&l.append('<td rowspan="'+T+'">'+M.email+"</td>"),U.do_date&&l.append('<td rowspan="'+T+'">'+M.date+"</td>"),0===Q)l.append('<th rowspan="'+T+'">'+iptFSQMReport.noupload+"</th>"),p.append(l);else for(q in M.uploads)j=M.uploads[q],A='<a href="'+j.guid+'" target="_blank" title="'+j.filename+'">',N="",""!==j.thumb_url&&(N=j.thumb_url.split(".").pop(),N!==n&&null!==N&&(N=N.toLowerCase())),""!==j.thumb_url&&N!==n&&null!==N&&e.inArray(N,["jpg","jpeg","gif","png","apng","tiff","bmp"])!==-1&&(A+='<img src="'+j.thumb_url+'" /><br />'),A+=j.name+"</a>",l.append("<th>"+A+"</th>"),p.append(l),l=e("<tr />");break;case"feedback_large":case"feedback_small":case"mathematical":for(P in a.feedback[R])s=a.feedback[R][P],l=e("<tr />"),l.append("<th>"+s.value+"</th>"),U.do_names&&(U.sensitive_data?l.append('<td><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>"):l.append("<td>"+s.name+"</td>")),U.sensitive_data&&(l.append("<td>"+s.email+"</td>"),l.append("<td>"+s.phone+"</td>")),U.do_date&&l.append("<td>"+s.date+"</td>"),p.append(l);break;case"signature":for(P in a.feedback[R])s=a.feedback[R][P],l=e("<tr />"),""!==s.value?l.append('<th><img src="data:image/png;base64,'+s.value+'" style="max-width: 400px; height: auto;" /></th>'):l.append("<th></th>"),U.do_names&&(U.sensitive_data?l.append('<td><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>"):l.append("<td>"+s.name+"</td>")),U.sensitive_data&&(l.append("<td>"+s.email+"</td>"),l.append("<td>"+s.phone+"</td>")),U.do_date&&l.append("<td>"+s.date+"</td>"),p.append(l);break;case"gps":for(P in a.feedback[R])s=a.feedback[R][P],l="<tr>",U.do_names&&(l+='<td rowspan="4">',l+=U.sensitive_data?'<a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a>":s.name,l+="</td>"),l+='<th colspan="2"><a target="_blank" href="https://maps.google.com/maps?z=12&t=m&q=loc:'+s.lat+"+"+s.long+'"><img src="'+s.map+'" height="300" width="500" /></a></th>',U.sensitive_data&&(l+='<td rowspan="4">'+s.email+"</td>"),U.do_date&&(l+='<td rowspan="4">'+s.date+"</td>"),l+="</tr>",l+="<tr><th>"+U.feedback.elements[R].settings.location_name_label+"</th><td>"+s.location_name+"</td></tr>",l+="<tr><th>"+U.feedback.elements[R].settings.lat_label+"</th><td>"+s.lat+"</td></tr>",l+="<tr><th>"+U.feedback.elements[R].settings.long_label+"</th><td>"+s.long+"</td></tr>",p.append(l);break;case"feedback_matrix":z='<table class="ipt_fsqm_preview">',E="<tr><th></th>";for(b in U.feedback.elements[R].settings.columns)E+="<th>"+U.feedback.elements[R].settings.columns[b]+"</th>";E+="</tr>",z+="<thead>"+E+"</thead><tfoot>"+E+"</tfoot><tbody>";for(y in U.feedback.elements[R].settings.rows){z+="<tr><th>"+U.feedback.elements[R].settings.rows[y]+"</th>";for(b in U.feedback.elements[R].settings.columns)z+='<td class="row-'+y+"-col-"+b+'"></td>';z+="</tr>"}z+="</tbody></table>",z=e(z);for(P in a.feedback[R]){s=a.feedback[R][P],B=z.clone();for(y in s.matrix)for(b in s.matrix[y])B.find(".row-"+y+"-col-"+b).html(s.matrix[y][b]);l="<tr>",U.do_names&&(l+=U.sensitive_data?'<td><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>":"<td>"+s.name+"</td>"),l+='<td class="data matrix"></td>',U.sensitive_data&&(l+="<td>"+s.email+"</td>"),U.do_date&&(l+="<td>"+s.date+"</td></tr>"),l=e(l),l.find("td.matrix").append(B),p.append(l)}}for(L in U.pinfo.elements)if("object"==typeof a.pinfo[L])switch(r=V.jElement.find(".ipt_fsqm_report_pinfo_"+L+" table.table_to_update").eq(0),p=r.find("> tbody"),p.find("tr.empty").remove(),o=r.find("td.data table"),d=r.next("div").find("table.others"),0===o.length&&(o=r),U.pinfo.elements[L].type){default:n!==iptFSQMReport.callbacks[U.pinfo.elements[L].type]&&"function"==typeof t[iptFSQMReport.callbacks[U.pinfo.elements[L].type]]&&t[iptFSQMReport.callbacks[U.pinfo.elements[L].type]].apply(V,[U.pinfo.elements[L],U.pinfo.data[L],a.pinfo[L],L,r,o,U]);break;case"f_name":case"l_name":case"email":case"phone":case"p_name":case"p_email":case"p_phone":case"textinput":case"textarea":case"password":case"keypad":case"datetime":case"hidden":for(P in a.pinfo[L])s=a.pinfo[L][P],l=e("<tr />"),l.append("<th>"+s.value+"</th>"),U.do_names&&(U.sensitive_data?l.append('<td><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>"):l.append("<td>"+s.name+"</td>")),U.sensitive_data&&(l.append("<td>"+s.email+"</td>"),l.append("<td>"+s.phone+"</td>")),U.do_date&&l.append("<td>"+s.date+"</td>"),p.append(l);break;case"repeatable":for(P in a.pinfo[L])s=a.pinfo[L][P],l=e("<tr />"),l.append('<td class="data">'+s.value+"</td>"),U.do_names&&(U.sensitive_data?l.append('<td style="vertical-align: top;"><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>"):l.append('<td style="vertical-align: top;">'+s.name+"</td>")),U.sensitive_data&&(l.append('<td style="vertical-align: top;">'+s.email+"</td>"),l.append('<td style="vertical-align: top;">'+s.phone+"</td>")),U.do_date&&l.append('<td style="vertical-align: top;">'+s.date+"</td>"),p.append(l);break;case"guestblog":for(P in a.pinfo[L]){if(s=a.pinfo[L][P],l=e("<tr />"),l.append("<th>"+s.title+"</th>"),U.do_names&&(U.sensitive_data?l.append('<td rowspan="3"><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>"):l.append('<td rowspan="3">'+s.name+"</td>")),U.sensitive_data&&(l.append('<td rowspan="3">'+s.email+"</td>"),l.append('<td rowspan="3">'+s.phone+"</td>")),U.do_date&&l.append('<td rowspan="3">'+s.date+"</td>"),p.append(l),l=e("<tr />"),l.append("<td>"+s.value+"</td>"),p.append(l),l=e("<tr />"),I=e("<td />"),s.taxonomy.length)for(O in s.taxonomy)if(I.append("<h4>"+s.taxonomy[O].tax),s.taxonomy[O].terms.length){H=e('<ul class="ul-disc" />');for(D in s.taxonomy[O].terms)H.append("<li>"+s.taxonomy[O].terms[D]+"</li>");I.append(H)}l.append(I),p.append(l)}break;case"address":for(P in a.pinfo[L])s=a.pinfo[L][P],l=e("<tr />"),l.append("<th>"+s.values.recipient+"</th>"),l.append("<td>"+s.values.line_one+"</td>"),l.append("<td>"+s.values.line_two+"</td>"),l.append("<td>"+s.values.line_three+"</td>"),l.append("<td>"+s.values.country+"</td>"),U.do_names&&(U.sensitive_data?l.append('<td><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>"):l.append("<td>"+s.name+"</td>")),U.sensitive_data&&(l.append("<td>"+s.email+"</td>"),l.append("<td>"+s.phone+"</td>")),U.do_date&&l.append("<td>"+s.date+"</td>"),p.append(l);break;case"payment":for(P in a.pinfo[L])s=a.pinfo[L][P],l=e("<tr />"),l.append("<th>"+s.invoice+"</th>"),l.append("<td>"+s.status+"</td>"),l.append("<th>"+s.txn+"</th>"),l.append("<td>"+s.gateway+"</td>"),l.append("<th>"+s.total+"</th>"),U.do_names&&(U.sensitive_data?l.append('<td><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>"):l.append("<td>"+s.name+"</td>")),U.sensitive_data&&(l.append("<td>"+s.email+"</td>"),l.append("<td>"+s.phone+"</td>")),U.do_date&&l.append("<td>"+s.date+"</td>"),p.append(l);break;case"p_radio":case"p_checkbox":case"p_select":for(c in a.pinfo[L])if("others_data"==c&&U.do_others){if(a.pinfo[L].others_data!==n&&a.pinfo[L].others_data.length)for(g in a.pinfo[L].others_data)s=a.pinfo[L].others_data[g],p=d.find("tbody"),p.find("tr.empty").remove(),l=e("<tr />"),l.append("<th>"+s.value+"</th>"),U.do_names&&(U.sensitive_data?l.append('<td><a class="thickbox" href="'+U.ajaxurl+"?action=ipt_fsqm_quick_preview&id="+s.id+'">'+s.name+"</a></td>"):l.append("<td>"+s.name+"</td>")),U.sensitive_data&&l.append("<td>"+s.email+"</td>"),U.do_date&&l.append("<td>"+s.date+"</td>"),p.append(l)}else U.pinfo.data[L][c]!==n&&null!==U.pinfo.data[L][c]||(U.pinfo.data[L][c]=0),i=a.pinfo[L][c],isNaN(i)||(U.pinfo.data[L][c]+=i,U.do_data&&V.updateCount(o.find("td.data_op_"+c),U.pinfo.data[L][c]));break;case"s_checkbox":for(w in a.pinfo[L])isNaN(a.pinfo[L][w])||(n===U.pinfo.data[L][w]?U.pinfo.data[L][w]=a.pinfo[L][w]:U.pinfo.data[L][w]+=a.pinfo[L][w],U.do_data&&V.updateCount(o.find("td.data_op_"+w),U.pinfo.data[L][w]));break;case"p_sorting":for(m in a.pinfo[L])if(k=V.objectLength(U.pinfo.elements[L].settings.options),isNaN(a.pinfo[L][m])){if("orders"==m&&"object"==typeof a.pinfo[L][m])for(x in a.pinfo[L][m])if(""!==x){if(n===U.pinfo.data[L].orders[x]){if(U.pinfo.data[L].orders[x]=a.pinfo[L][m][x],U.do_data){C=x.split("-"),o.find("tbody tr").length&&o.find("tbody").append('<tr class="head"><th colspan="3"></th></tr>'),F=!0;for(c in C)n!==U.pinfo.elements[L].settings.options[C[c]]&&(u="",F===!0?(F=!1,u='<tr><td class="icons">'+iptFSQMReport.sorting_img+"</td><th>"+U.pinfo.elements[L].settings.options[C[c]].label+'</th><td rowspan="'+k+'" data="'+x+'"></td></tr>'):u='<tr><td class="icons">'+iptFSQMReport.sorting_img+"</td><th>"+U.pinfo.elements[L].settings.options[C[c]].label+"</th>",o.find("tbody").append(u))}}else U.pinfo.data[L].orders[x]+=a.pinfo[L][m][x];U.do_data&&V.updateCount(o.find('td[data="'+x+'"]'),U.pinfo.data[L].orders[x])}}else n===U.pinfo.data[L][m]?U.pinfo.data[L][m]=a.pinfo[L][m]:U.pinfo.data[L][m]+=a.pinfo[L][m]}},initCharts:function(){var t=this;this.settings;this.jElement.find(".ipt_fsqm_report_container").show(),s?t.drawCharts():google.charts.setOnLoadCallback(function(){s=!0,t.drawCharts()}),this.printer.show().find("button.ipt_fsqm_report_print").on("click",function(){t.jElement.printElement({leaveOpen:!0,printMode:"popup",pageTitle:a.title,printBodyOptions:{classNameToAdd:t.jElement.parents(".ipt_uif_common").attr("class"),styleToAdd:"padding:10px;margin:10px;background: #fff none;color:#333;font-size:12px;"}})}),"function"==typeof e.fn.iptPluginUIFAdmin&&this.jElement.iptPluginUIFAdmin("reinitTBAnchors"),this.progressBar.fadeOut("fast"),this.loader.find(".ipt_uif_ajax_loader_text").html(iptFSQMReport.charts)},drawCharts:function(){this.loader.fadeOut("fast");var i,s,r,o,d,p,l,u,c,g,f,_,h,m,v,y,b,w,k,x,C,F,R,S,M,Q,T,q,j=this,A=this.settings;for(i in A.survey.data)switch(r=j.jElement.find(".ipt_fsqm_report_survey_"+i+" table.table_to_update").eq(0),o=r.find("td.visualization"),l=r.find("td.data"),M=j.getChartTitle("mcq",i),Q=j.getChartLegend("mcq",i),A.survey.elements[i].type){default:n!==iptFSQMReport.gcallbacks[A.survey.elements[i].type]&&"function"==typeof t[iptFSQMReport.gcallbacks[A.survey.elements[i].type]]&&t[iptFSQMReport.gcallbacks[A.survey.elements[i].type]].apply(j,[A.survey.elements[i],A.survey.data[i],i,r,l,A,M,Q]);break;case"radio":case"checkbox":case"select":case"thumbselect":p=a.createElement("div"),o.append(p),d=[],d[0]=[iptFSQMReport.g_data.op_label,iptFSQMReport.g_data.ct_label];for(u in A.survey.data[i])n!==A.survey.data[i][u]&&("others"==u&&n!==A.survey.elements[i].settings.o_label&&!0===A.survey.elements[i].settings.others?d[d.length]=[A.survey.elements[i].settings.o_label.replace(/(<([^>]+)>)/gi,""),A.survey.data[i][u]]:n!==A.survey.elements[i].settings.options[u]&&(d[d.length]=[A.survey.elements[i].settings.options[u].label.replace(/(<([^>]+)>)/gi,""),A.survey.data[i][u]]));switch(c=A.survey.elements[i].title.replace(/(<([^>]+)>)/gi,""),F=j.getChartType("mcq",i,"pie")){default:case"pie":j.drawPieChart(p,d,c,{},M,Q);break;case"bar":j.drawBarChart(p,d,"","",c,300,{},M,Q);break;case"column":j.drawColumnChart(p,d,"","",c,300,{},M,Q)}break;case"smileyrating":p=a.createElement("div"),o.append(p),d=[],d[0]=[iptFSQMReport.g_data.op_label,iptFSQMReport.g_data.ct_label];for(g in A.survey.data[i])n!==A.survey.data[i][g]&&"feedback_data"!=g&&A.survey.elements[i].settings.labels[g]!==n&&(d[d.length]=[A.survey.elements[i].settings.labels[g].replace(/(<([^>]+)>)/gi,""),A.survey.data[i][g]]);switch(c=A.survey.elements[i].title.replace(/(<([^>]+)>)/gi,""),F=j.getChartType("mcq",i,"pie")){default:case"pie":j.drawPieChart(p,d,c,{},M,Q);break;case"bar":j.drawBarChart(p,d,"","",c,300,{},M,Q);break;case"column":j.drawColumnChart(p,d,"","",c,300,{},M,Q)}break;case"likedislike":p=a.createElement("div"),o.append(p),d=[],d[0]=[iptFSQMReport.g_data.op_label,iptFSQMReport.g_data.ct_label];for(g in A.survey.data[i])n!==A.survey.data[i][g]&&"feedback_data"!=g&&A.survey.elements[i].settings[g]!==n&&(d[d.length]=[A.survey.elements[i].settings[g].replace(/(<([^>]+)>)/gi,""),A.survey.data[i][g]]);switch(c=A.survey.elements[i].title.replace(/(<([^>]+)>)/gi,""),F=j.getChartType("mcq",i,"pie")){default:case"pie":j.drawPieChart(p,d,c,{},M,Q);break;case"bar":j.drawBarChart(p,d,"","",c,300,{},M,Q);break;case"column":j.drawColumnChart(p,d,"","",c,300,{},M,Q)}break;case"slider":p=a.createElement("div"),o.append(p),c=A.survey.elements[i].title.replace(/(<([^>]+)>)/gi,""),F=j.getChartType("mcq",i,"pie"),R=j.getChartAverage("mcq",i,!1),j.populateSliderChart(A.survey.data[i],c,300,p,F,R,M,Q);break;case"range":p=a.createElement("div"),o.append(p),c=A.survey.elements[i].title.replace(/(<([^>]+)>)/gi,""),j.populateRangeChart(A.survey.data[i],c,300,p,A.survey.elements[i].settings,M,Q);break;case"grading":F=j.getChartType("mcq",i,"pie"),R=j.getChartAverage("mcq",i,!1);for(u in A.survey.data[i])n!==A.survey.elements[i].settings.options[u]&&(f="object"==typeof A.survey.elements[i].settings.options[u]?A.survey.elements[i].settings.options[u].label:A.survey.elements[i].settings.options[u],f=f.replace(/(<([^>]+)>)/gi,""),_="grading",h=e('<td colspan=""></td>'),A.do_data?(h.attr("rowspan",r.find("tbody tr."+_+"_"+u+"_value_to_count_tr").length+2),r.find("tbody tr."+_+"_"+u+".head").prepend(h)):(T=e("<tr></tr>"),T.append(h),r.find("tbody").append(T)),p=a.createElement("div"),h.append(p),A.survey.elements[i].settings.range===!0?j.populateRangeChart(A.survey.data[i][u],f,"auto",p,A.survey.elements[i].settings,M,Q):j.populateSliderChart(A.survey.data[i][u],f,"auto",p,F,R,M,Q));break;case"spinners":case"starrating":case"scalerating":F=j.getChartType("mcq",i,"pie");for(u in A.survey.data[i])n!==A.survey.elements[i].settings.options[u]&&(f=A.survey.elements[i].settings.options[u],"object"==typeof f&&(f=f.label),f=f.replace(/(<([^>]+)>)/gi,""),_="spinners"==A.survey.elements[i].type?"spinners":"rating",h=e('<td colspan=""></td>'),A.do_data?(h.attr("rowspan",r.find("tbody tr."+_+"_"+u+"_value_to_count_tr").length+2),r.find("tbody tr."+_+"_"+u+".head").prepend(h)):(T=e("<tr></tr>"),T.append(h),r.find("tbody").append(T)),p=a.createElement("div"),h.append(p),R=!1,"spinners"===A.survey.elements[i].type&&(R=j.getChartAverage("mcq",i,!1)),j.populateSliderChart(A.survey.data[i][u],f,"auto",p,F,R,M,Q));break;case"matrix_dropdown":q=[""];for(v in A.survey.elements[i].settings.options)q[q.length]=A.survey.elements[i].settings.options[v].label.replace(/(<([^>]+)>)/gi,"");for(m in A.survey.elements[i].settings.rows){d=[],d[0]=q,n===A.survey.data[i][m]&&(A.survey.data[i][m]=[]);for(y in A.survey.elements[i].settings.columns){n===A.survey.data[i][m][y]&&(A.survey.data[i][m][y]=[]),b=[A.survey.elements[i].settings.columns[y].replace(/(<([^>]+)>)/gi,"")];for(u in A.survey.elements[i].settings.options)b[b.length]=n===A.survey.data[i][m][y][u]?0:A.survey.data[i][m][y][u];d[d.length]=b}switch(p=a.createElement("div"),o.filter(".row-"+m).append(p),c=A.survey.elements[i].settings.rows[m].replace(/(<([^>]+)>)/gi,""),F=j.getChartType("mcq",i,"pie")){default:case"bar":case"sbar":S="sbar"==F?{isStacked:!0}:{},j.drawBarChart(p,d,"","",c,300,S,M,Q);break;case"column":case"scolumn":S="scolumn"==F?{isStacked:!0}:{},j.drawColumnChart(p,d,"","",c,300,S,M,Q)}}break;case"matrix":d=[],d[0]=[""];for(v in A.survey.elements[i].settings.columns)d[0][d[0].length]=A.survey.elements[i].settings.columns[v].replace(/(<([^>]+)>)/gi,"");for(w in A.survey.elements[i].settings.rows){n===A.survey.data[i][w]&&(A.survey.data[i][w]=[]),b=[A.survey.elements[i].settings.rows[w].replace(/(<([^>]+)>)/gi,"")];for(k in A.survey.elements[i].settings.columns)n===A.survey.data[i][w][k]?b[b.length]=0:b[b.length]=parseFloat(A.survey.data[i][w][k]);d[d.length]=b}switch(p=a.createElement("div"),o.append(p),c=A.survey.elements[i].title.replace(/(<([^>]+)>)/gi,""),F=j.getChartType("mcq",i,"pie")){default:case"bar":case"sbar":S="sbar"==F?{isStacked:!0}:{},j.drawBarChart(p,d,"","",c,300,S,M,Q);break;case"column":case"scolumn":S="scolumn"==F?{isStacked:!0}:{},j.drawColumnChart(p,d,"","",c,300,S,M,Q)}break;case"toggle":switch(d=[],d[0]=[iptFSQMReport.g_data.tg_label,iptFSQMReport.g_data.ct_label],d[1]=[A.survey.elements[i].settings.on,A.survey.data[i].on],d[2]=[A.survey.elements[i].settings.off,A.survey.data[i].off],p=a.createElement("div"),o.append(p),c=A.survey.elements[i].title.replace(/(<([^>]+)>)/gi,""),F=j.getChartType("mcq",i,"pie")){default:case"pie":j.drawPieChart(p,d,c,{},M,Q);break;case"bar":j.drawBarChart(p,d,"","",c,300,{},M,Q);break;case"column":j.drawColumnChart(p,d,"","",c,300,{},M,Q)}break;case"sorting":x=[];for(v in A.survey.elements[i].settings.options)x[x.length]=A.survey.elements[i].settings.options[v].label.replace(/(<([^>]+)>)/gi,"");switch(d=[],d[0]=[iptFSQMReport.g_data.tg_label,iptFSQMReport.g_data.ct_label],d[1]=[iptFSQMReport.g_data.s_presets,{v:n!==A.survey.data[i].preset?A.survey.data[i].preset:0,f:(n!==A.survey.data[i].preset?A.survey.data[i].preset:0)+"\n"+iptFSQMReport.g_data.s_order+"\n"+x.join("\n")}],d[2]=[iptFSQMReport.g_data.s_others,{v:n!==A.survey.data[i].other?A.survey.data[i].other:0,f:(n!==A.survey.data[i].other?A.survey.data[i].other:0)+"\n"+iptFSQMReport.g_data.s_order_custom}],p=a.createElement("div"),o.append(p),c=A.survey.elements[i].title.replace(/(<([^>]+)>)/gi,""),F=j.getChartType("mcq",i,"pie")){default:case"pie":j.drawPieChart(p,d,c,{},M,Q);break;case"bar":j.drawBarChart(p,d,"","",c,300,{},M,Q);break;case"column":j.drawColumnChart(p,d,"","",c,300,{},M,Q)}d=[],A.survey.data[i].orders.sort(function(e,t){return t-e}),d[0]=[iptFSQMReport.g_data.tg_label,iptFSQMReport.g_data.ct_label];for(C in A.survey.data[i].orders){g=C.split("-"),f=[];for(v in g)n!==A.survey.elements[i].settings.options[g[v]]&&(f[f.length]=A.survey.elements[i].settings.options[g[v]].label.replace(/(<([^>]+)>)/gi,""));d[d.length]=[C,{v:A.survey.data[i].orders[C],f:A.survey.data[i].orders[C]+"\n"+iptFSQMReport.g_data.s_order+"\n"+f.join("\n")}]}switch(p=a.createElement("div"),o.append(p),F=j.getChartType("mcq",i,"pie")){default:case"pie":j.drawPieChart(p,d,iptFSQMReport.g_data.s_breakdown,{},M,Q);break;case"bar":j.drawBarChart(p,d,"","",iptFSQMReport.g_data.s_breakdown,300,{},M,Q);break;case"column":j.drawColumnChart(p,d,"","",iptFSQMReport.g_data.s_breakdown,300,{},M,Q)}}for(s in A.pinfo.data)switch(r=j.jElement.find(".ipt_fsqm_report_pinfo_"+s+" table.table_to_update").eq(0),o=r.find("td.visualization"),l=r.find("td.data"),M=j.getChartTitle("pinfo",s),Q=j.getChartLegend("pinfo",s),A.pinfo.elements[s].type){default:n!==iptFSQMReport.gcallbacks[A.pinfo.elements[s].type]&&"function"==typeof t[iptFSQMReport.gcallbacks[A.pinfo.elements[s].type]]&&t[iptFSQMReport.gcallbacks[A.pinfo.elements[s].type]].apply(j,[A.pinfo.elements[s],A.pinfo.data[s],s,r,l,A,M,Q]);break;case"p_radio":case"p_checkbox":case"p_select":p=a.createElement("div"),o.append(p),d=[],d[0]=[iptFSQMReport.g_data.op_label,iptFSQMReport.g_data.ct_label];for(u in A.pinfo.data[s])n!==A.pinfo.data[s][u]&&("others"==u&&n!==A.pinfo.elements[s].settings.o_label&&!0===A.pinfo.elements[s].settings.others?d[d.length]=[A.pinfo.elements[s].settings.o_label.replace(/(<([^>]+)>)/gi,""),A.pinfo.data[s][u]]:n!==A.pinfo.elements[s].settings.options[u]&&(d[d.length]=[A.pinfo.elements[s].settings.options[u].label.replace(/(<([^>]+)>)/gi,""),A.pinfo.data[s][u]]));switch(c=A.pinfo.elements[s].title.replace(/(<([^>]+)>)/gi,""),F=j.getChartType("pinfo",s,"pie")){default:case"pie":j.drawPieChart(p,d,c,{},M,Q);
break;case"bar":j.drawBarChart(p,d,"","",c,300,{},M,Q);break;case"column":j.drawColumnChart(p,d,"","",c,300,{},M,Q)}break;case"s_checkbox":switch(d=[],d[0]=[iptFSQMReport.g_data.sc_label,iptFSQMReport.g_data.ct_label],d[1]=[iptFSQMReport.g_data.scon_label,A.pinfo.data[s].checked],d[2]=[iptFSQMReport.g_data.scoff_label,A.pinfo.data[s].unchecked],p=a.createElement("div"),o.append(p),c=A.pinfo.elements[s].title.replace(/(<([^>]+)>)/gi,""),F=j.getChartType("pinfo",s,"pie")){default:case"pie":j.drawPieChart(p,d,c,{},M,Q);break;case"bar":j.drawBarChart(p,d,"","",c,300,{},M,Q);break;case"column":j.drawColumnChart(p,d,"","",c,300,{},M,Q)}break;case"p_sorting":x=[];for(v in A.pinfo.elements[s].settings.options)x[x.length]=A.pinfo.elements[s].settings.options[v].label.replace(/(<([^>]+)>)/gi,"");switch(d=[],d[0]=[iptFSQMReport.g_data.tg_label,iptFSQMReport.g_data.ct_label],d[1]=[iptFSQMReport.g_data.s_presets,{v:n!==A.pinfo.data[s].preset?A.pinfo.data[s].preset:0,f:(n!==A.pinfo.data[s].preset?A.pinfo.data[s].preset:0)+"\n"+iptFSQMReport.g_data.s_order+"\n"+x.join("\n")}],d[2]=[iptFSQMReport.g_data.s_others,{v:n!==A.pinfo.data[s].other?A.pinfo.data[s].other:0,f:(n!==A.pinfo.data[s].other?A.pinfo.data[s].other:0)+"\n"+iptFSQMReport.g_data.s_order_custom}],p=a.createElement("div"),o.append(p),c=A.pinfo.elements[s].title.replace(/(<([^>]+)>)/gi,""),F=j.getChartType("pinfo",s,"pie")){default:case"pie":j.drawPieChart(p,d,c,{},M,Q);break;case"bar":j.drawBarChart(p,d,"","",c,300,{},M,Q);break;case"column":j.drawColumnChart(p,d,"","",c,300,{},M,Q)}d=[],A.pinfo.data[s].orders.sort(function(e,t){return t-e}),d[0]=[iptFSQMReport.g_data.tg_label,iptFSQMReport.g_data.ct_label];for(C in A.pinfo.data[s].orders){g=C.split("-"),f=[];for(v in g)n!==A.pinfo.elements[s].settings.options[g[v]]&&(f[f.length]=A.pinfo.elements[s].settings.options[g[v]].label.replace(/(<([^>]+)>)/gi,""));d[d.length]=[C,{v:A.pinfo.data[s].orders[C],f:A.pinfo.data[s].orders[C]+"\n"+iptFSQMReport.g_data.s_order+"\n"+f.join("\n")}]}switch(p=a.createElement("div"),o.append(p),F=j.getChartType("pinfo",s,"pie")){default:case"pie":j.drawPieChart(p,d,iptFSQMReport.g_data.s_breakdown,{},M,Q);break;case"bar":j.drawBarChart(p,d,"","",iptFSQMReport.g_data.s_breakdown,300,{},M,Q);break;case"column":j.drawColumnChart(p,d,"","",iptFSQMReport.g_data.s_breakdown,300,{},M,Q)}}},getChartType:function(e,t,a){var i;try{i=this.settings.cmeta[e].charttype[t]}catch(e){i=a}return n===i&&(i=a),i},getChartAverage:function(e,t){return this._getChartToggles(e,t,"average")},getChartTitle:function(e,t){return this._getChartToggles(e,t,"title")},getChartLegend:function(e,t){return this._getChartToggles(e,t,"legend")},_getChartToggles:function(e,t,a){var i;try{i=this.settings.cmeta[e].toggles[t][a]}catch(e){i=!1}return n===i&&(i=!1),!!i},objectLength:function(e){if("object"!=typeof e)return!1;var t,a=0;for(t in e)e.hasOwnProperty(t)&&a++;return a},numberFormat:function(e){var t=parseFloat(e);return isNaN(t)?e:parseInt(100*e,10)/100},appendToTableInPositionForMinMax:function(e,t,a,i,s,r,o,d,p){if(!r.length)return void(null===i?a.append(e):i.after(e));var l,u,c,g,f,_,h=parseFloat(r[0]),m=parseFloat(r[1]);if(o=parseFloat(o),d=parseFloat(d),p=parseFloat(p),t.find("tbody tr td."+s).length&&!(isNaN(h)||isNaN(m)||isNaN(o)||isNaN(d)||isNaN(p)))for(l=h,u=h;l>=o||u<=d;l-=p,u+=p){if(c=t.find('td[data-value-min="'+l+'"].'+s),c.length)for(g=m,f=m;g>=o||f<=d;g-=p,f+=p){if(c.filter('td[data-value-max="'+g+'"].'+s).length)return void c.filter('td[data-value-max="'+g+'"].'+s).parent().after(e);if(c.filter('td[data-value-max="'+f+'"].'+s).length)return void c.filter('td[data-value-max="'+f+'"].'+s).parent().before(e)}if(_=t.find('td[data-value-min="'+u+'"].'+s),_.length)for(g=m,f=m;g>=o||f<=d;g-=p,f+=p){if(_.filter('td[data-value-max="'+g+'"].'+s).length)return void _.filter('td[data-value-max="'+g+'"].'+s).parent().after(e);if(_.filter('td[data-value-max="'+f+'"].'+s).length)return void _.filter('td[data-value-max="'+f+'"].'+s).parent().before(e)}}null===i||i===n?a.append(e):i.after(e)},appendToTableInPositionForVal:function(e,t,a,i,s,r,o,d,p){r=parseFloat(r),o=parseFloat(o),d=parseFloat(d),p=parseFloat(p);var l,u,c,g;if(t.find("tbody tr td."+s).length&&!(isNaN(r)||isNaN(o)||isNaN(d)||isNaN(p)))for(l=r,u=r;l>=o||u<=d;l-=p,u+=p){if(c=t.find('td[data-value="'+l+'"].'+s),c.length)return void c.parent().after(e);if(g=t.find('td[data-value="'+u+'"].'+s),g.length)return void g.parent().before(e)}null===i||i===n?a.append(e):i.after(e)},updateCount:function(e,t){e.html(t)},calculateRating:function(e,t,a,i,s,r,o,d,p){var l,u,c,g,f,_,h,m,v=0,y=0;for(l in e)if(!isNaN(e[l])&&(v+=l*e[l],y+=e[l],n===t[l]?t[l]=e[l]:t[l]+=e[l],this.settings.do_data))if(u=a.find('td[data-value="'+l+'"].'+o),u.length)u.text(t[l]);else{for(c="",g=1;g<=p.max;g++)c+=g<=l?iptFSQMReport.rating_img_full:iptFSQMReport.rating_img_empty;_='<tr class="'+r+'"><th>'+c+'</th><td class="'+o+'" data-value="'+l+'">'+t[l]+"</td></tr>",this.appendToTableInPositionForVal(_,a,i,s,o,l,p.min,p.max,p.step)}if(n===t.average_meta?t.average_meta={total:v,count:y}:(t.average_meta.total+=v,t.average_meta.count+=y),t.average=this.numberFormat(t.average_meta.total/t.average_meta.count),this.settings.do_data){for(h="",m=Math.floor(t.average),f=1;f<=p.max;f++)h+=m>=f?iptFSQMReport.rating_img_full:m+1===f&&f===Math.round(t.average)?iptFSQMReport.rating_img_half:iptFSQMReport.rating_img_empty;this.updateCount(d.find("span.avg"),t.average),this.updateCount(d.find("span.avg_img"),h),this.updateCount(d.find("span.avg_count"),t.average_meta.count)}},calculateSlider:function(e,t,a,i,s,r,o,d,p){var l,u,c,g=0,f=0;n===p.prefix&&(p.prefix=""),n===p.suffix&&(p.suffix="");for(l in e)isNaN(e[l])||(g+=l*e[l],f+=e[l],n===t[l]?t[l]=e[l]:t[l]+=e[l],this.settings.do_data&&(u=a.find('td[data-value="'+l+'"].'+o),u.length?u.text(t[l]):(c='<tr class="'+r+'"><th>'+p.prefix+l+p.suffix+'</th><td class="'+o+'" data-value="'+l+'">'+t[l]+"</td></tr>",this.appendToTableInPositionForVal(c,a,i,s,o,l,p.min,p.max,p.step))));n===t.average_meta?t.average_meta={total:g,count:f}:(t.average_meta.total+=g,t.average_meta.count+=f),t.average=this.numberFormat(t.average_meta.total/t.average_meta.count),this.settings.do_data&&(this.updateCount(d.find("span.avg"),p.prefix+t.average+p.suffix),this.updateCount(d.find("span.avg_count"),t.average_meta.count))},calculateRange:function(e,t,a,i,s,r,o,d,p){var l,u,c,g,f,_,h=0,m=0,v=0;n===p.prefix&&(p.prefix=""),n===p.suffix&&(p.suffix="");for(l in e)isNaN(e[l])||(u=l.split(","),v+=e[l],h+=u[0]*e[l],m+=u[1]*e[l],c=u[0]+iptFSQMReport.range_text+u[1],_=p.prefix+u[0]+p.suffix+iptFSQMReport.range_text+p.prefix+u[1]+p.suffix,n===t[c]?t[c]=e[l]:t[c]+=e[l],this.settings.do_data&&(g=a.find('td[data-value-min="'+u[0]+'"][data-value-max="'+u[1]+'"].'+o),g.length?g.text(t[c]):(f='<tr class="'+r+'"><th>'+_+'</th><td class="'+o+'" data-value-min="'+u[0]+'" data-value-max="'+u[1]+'">'+t[c]+"</td></tr>",this.appendToTableInPositionForMinMax(f,a,i,s,o,u,p.min,p.max,p.step))));n===t.average_meta?t.average_meta={total_min:h,total_max:m,count:v}:(t.average_meta.total_min+=h,t.average_meta.total_max+=m,t.average_meta.count+=v),t.average=p.prefix+this.numberFormat(t.average_meta.total_min/t.average_meta.count)+p.suffix+iptFSQMReport.range_text+p.prefix+this.numberFormat(t.average_meta.total_max/t.average_meta.count)+p.suffix,this.settings.do_data&&(this.updateCount(d.find("span.avg"),t.average),this.updateCount(d.find("span.avg_count"),t.average_meta.count))},populateSliderChart:function(e,t,a,i,s,r,o,d){var p,l,u,c=[];for(p in e)isNaN(p)||(c[c.length]=parseFloat(p));s=n===s?"bar":s,c.sort(function(e,t){return r===!1&&"column"!==s?t-e:e-t});var g=[];g[g.length]=[iptFSQMReport.g_data.sl_label,iptFSQMReport.g_data.en_label];for(p in c)g[g.length]=[(r===!1&&"area"!==s?"":0)+c[p],e[c[p]]];if(r){for(l=0;l<g.length;l++)0===l?(g[l][g[l].length]=iptFSQMReport.g_data.perv,g[l][g[l].length]=iptFSQMReport.g_data.perc):(g[l][g[l].length]=this.numberFormat(g[l][0]*g[l][1]/e.average_meta.total*100),g[l][g[l].length]=this.numberFormat(g[l][1]/e.average_meta.count*100));l=g[0].length-2,u={seriesType:"bars",series:{}},u.series[l]={type:"line",format:"percent"},u.series[l-1]={type:"line",format:"percent"},this.drawComboChart(i,g,iptFSQMReport.g_data.sl_label,iptFSQMReport.g_data.en_label,t,a,u,o,d)}else switch(u={hAxis:{baseline:"automatic"}},s){default:case"bar":this.drawBarChart(i,g,iptFSQMReport.g_data.en_label,iptFSQMReport.g_data.sl_label,t,a,u,o,d);break;case"column":this.drawColumnChart(i,g,iptFSQMReport.g_data.en_label,iptFSQMReport.g_data.sl_label,t,a,u,o,d);break;case"area":this.drawAreaChart(i,g,iptFSQMReport.g_data.en_label,iptFSQMReport.g_data.sl_label,t,a,u,o,d)}},populateRangeChart:function(e,t,a,n,i,s,r){var o,d,p=[];for(o in e)d=o.split(iptFSQMReport.range_text),2==d.length&&(p[p.length]=d);p.sort(function(e,t){return e[0]>t[0]?-1:e[0]<t[0]?1:e[1]>t[1]?-1:e[1]<t[1]?1:0});var l,u,c,g=[];for(l in p)u=p[l].join(iptFSQMReport.range_text),c=e[u]+" "+(1==e[u]?iptFSQMReport.g_data.sl_head_label_s:iptFSQMReport.g_data.sl_head_label_p),g[g.length]=[c,parseFloat(i.min),parseFloat(p[l][0]),parseFloat(p[l][1]),parseFloat(i.max)];this.drawCandlestickChart(n,g,iptFSQMReport.g_data.sg_label,iptFSQMReport.g_data.ct_label,t,a,i,{},s,r)},drawPieChart:function(i,s,r,o,d,p){d=n===d||d,p=n===p||p;var l=google.visualization.arrayToDataTable(s),u=new google.visualization.PieChart(i),c={title:r,is3D:!0,height:300,backgroundColor:"transparent",legend:{position:"bottom"},tooltip:{isHTML:!0}};n===o&&(o={}),c=e.extend({},o,c),!1===d&&(c.title=n),!1===p&&(c.legend.position="none"),u.draw(l,c),e(t).resize(e.debounce(250,function(){e(i).html(""),setTimeout(function(){u=new google.visualization.PieChart(i),u.draw(l,c)},200)})),e(a).on("fsqm.chartRedraw",e.debounce(250,function(){e(i).html(""),setTimeout(function(){u=new google.visualization.PieChart(i),u.draw(l,c)},200)}))},drawAreaChart:function(i,s,r,o,d,p,l,u,c){u=n===u||u,c=n===c||c;var g=google.visualization.arrayToDataTable(s),f=new google.visualization.AreaChart(i),_={hAxis:{title:r,baseline:0,gridlines:{count:-1}},vAxis:{title:o,baseline:0,gridlines:{count:-1}},title:d,backgroundColor:"transparent",height:p,tooltip:{isHTML:!0},legend:{position:"bottom"}};n===l&&(l={}),_=e.extend({},l,_),!1===u&&(_.title=n),!1===c&&(_.legend.position="none",_.axisTitlesPosition="none",_.hAxis.textPosition="none",_.vAxis.textPosition="none",_.hAxis.gridlines.color="none",_.vAxis.gridlines.color="none"),f.draw(g,_),e(t).resize(e.debounce(250,function(){e(i).html(""),setTimeout(function(){f=new google.visualization.AreaChart(i),f.draw(g,_)},200)})),e(a).on("fsqm.chartRedraw",e.debounce(250,function(){e(i).html(""),setTimeout(function(){f=new google.visualization.AreaChart(i),f.draw(g,_)},200)}))},drawCandlestickChart:function(i,s,r,o,d,p,l,u,c,g){c=n===c||c,g=n===g||g;var f=google.visualization.arrayToDataTable(s,!0),_=new google.visualization.CandlestickChart(i),h={hAxis:{title:r,gridlines:{count:-1}},vAxis:{title:o,minValue:parseFloat(l.min),maxValue:parseFloat(l.max),viewWindow:{max:parseFloat(l.max),min:parseFloat(l.min)},gridlines:{count:-1}},title:d,backgroundColor:"transparent",height:p,tooltip:{isHTML:!0},legend:{position:"none"}};n===u&&(u={}),h=e.extend({},u,h),!1===c&&(h.title=n),!1===g&&(h.legend.position="none",h.axisTitlesPosition="none",h.hAxis.textPosition="none",h.vAxis.textPosition="none",h.hAxis.gridlines.color="none",h.vAxis.gridlines.color="none"),_.draw(f,h),e(t).resize(e.debounce(250,function(){e(i).html(""),setTimeout(function(){_=new google.visualization.CandlestickChart(i),_.draw(f,h)},200)})),e(a).on("fsqm.chartRedraw",e.debounce(250,function(){e(i).html(""),setTimeout(function(){_=new google.visualization.CandlestickChart(i),_.draw(f,h)},200)}))},drawBarChart:function(i,s,r,o,d,p,l,u,c){u=n===u||u,c=n===c||c;var g=this,f=google.visualization.arrayToDataTable(s),_=g.settings.material?new google.charts.Bar(i):new google.visualization.BarChart(i),h={hAxis:{title:r,baseline:0,gridlines:{count:-1}},vAxis:{title:o,gridlines:{count:-1}},title:d,backgroundColor:"transparent",height:p,tooltip:{isHTML:!0},legend:{position:"bottom"}};g.settings.material&&(h.bars="horizontal"),n===l&&(l={}),h=e.extend({},l,h),!1===u&&(h.title=n),!1===c&&(h.legend.position="none",h.axisTitlesPosition="none",h.hAxis.textPosition="none",h.vAxis.textPosition="none",h.hAxis.gridlines.color="none",h.vAxis.gridlines.color="none"),g.settings.material?_.draw(f,google.charts.Bar.convertOptions(h)):_.draw(f,h);var m=function(){_=g.settings.material?new google.charts.Bar(i):new google.visualization.BarChart(i),g.settings.material?_.draw(f,google.charts.Bar.convertOptions(h)):_.draw(f,h)};e(t).resize(e.debounce(250,function(){e(i).html(""),setTimeout(m,200)})),e(a).on("fsqm.chartRedraw",e.debounce(250,function(){e(i).html(""),setTimeout(m,200)}))},drawColumnChart:function(i,s,r,o,d,p,l,u,c){u=n===u||u,c=n===c||c;var g=this,f=google.visualization.arrayToDataTable(s),_=g.settings.material?new google.charts.Bar(i):new google.visualization.ColumnChart(i),h={hAxis:{title:r,gridlines:{count:-1}},vAxis:{title:o,baseline:0,gridlines:{count:-1}},title:d,backgroundColor:"transparent",height:p,tooltip:{isHTML:!0},legend:{position:"bottom"}};n===l&&(l={}),h=e.extend({},l,h),!1===u&&(h.title=n),!1===c&&(h.legend.position="none",h.axisTitlesPosition="none",h.hAxis.textPosition="none",h.vAxis.textPosition="none",h.hAxis.gridlines.color="none",h.vAxis.gridlines.color="none"),g.settings.material?_.draw(f,google.charts.Bar.convertOptions(h)):_.draw(f,h);var m=function(){_=g.settings.material?new google.charts.Bar(i):new google.visualization.ColumnChart(i),g.settings.material?_.draw(f,google.charts.Bar.convertOptions(h)):_.draw(f,h)};e(t).resize(e.debounce(250,function(){e(i).html(""),setTimeout(m,200)})),e(a).on("fsqm.chartRedraw",e.debounce(250,function(){e(i).html(""),setTimeout(m,200)}))},drawComboChart:function(i,s,r,o,d,p,l,u,c){u=n===u||u,c=n===c||c;var g=google.visualization.arrayToDataTable(s),f=new google.visualization.ComboChart(i),_={title:d,vAxis:{title:o,gridlines:{count:-1}},hAxis:{title:r,gridlines:{count:-1}},backgroundColor:"transparent",height:p,tooltip:{isHTML:!0},legend:{position:"bottom"}};n===l&&(l={}),_=e.extend({},l,_),!1===u&&(_.title=n),!1===c&&(_.legend.position="none",_.axisTitlesPosition="none",_.hAxis.textPosition="none",_.vAxis.textPosition="none",_.hAxis.gridlines.color="none",_.vAxis.gridlines.color="none"),f.draw(g,_),e(t).resize(e.debounce(250,function(){e(i).html(""),setTimeout(function(){f=new google.visualization.ComboChart(i),f.draw(g,_)},200)})),e(a).on("fsqm.chartRedraw",e.debounce(250,function(){e(i).html(""),setTimeout(function(){f=new google.visualization.ComboChart(i),f.draw(g,_)},200)}))},yourOtherFunction:function(){}};var d={init:function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new i(this,t))})}};e.fn[r]=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):("object"!=typeof t&&t?e.error("Method "+t+" does not exist on jQuery."+r):d.init.apply(this,arguments),this)}}(jQuery,window,document);
//# sourceMappingURL=jquery.ipt-fsqm-reports.min.js.map